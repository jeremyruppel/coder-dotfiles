#!/usr/bin/env bash

NVIM_VERSION="v0.10.4"
INSTALL_DIR="$HOME/.local"
NVIM_BIN="$INSTALL_DIR/bin/nvim"

# Install if missing or wrong version
if [ ! -f "$NVIM_BIN" ] || ! "$NVIM_BIN" --version 2>/dev/null | grep -q "$NVIM_VERSION"; then
  echo "Installing neovim $NVIM_VERSION..."
  mkdir -p "$INSTALL_DIR"
  curl -fsSL "https://github.com/neovim/neovim/releases/download/${NVIM_VERSION}/nvim-linux-x86_64.tar.gz" -o /tmp/nvim.tar.gz
  tar xzf /tmp/nvim.tar.gz -C "$INSTALL_DIR" --strip-components=1
  rm /tmp/nvim.tar.gz
  echo "neovim $NVIM_VERSION installed to $INSTALL_DIR"
else
  echo "neovim $NVIM_VERSION already installed"
fi
